---
title: "WSLã§openã‚³ãƒãƒ³ãƒ‰ã‚’ç”¨æ„ã™ã‚‹"
emoji: "ğŸ¤–"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["WSL","zsh"]
published: true
---

## TL;DR

WSLã§Macã®openã‚³ãƒãƒ³ãƒ‰ã¿ãŸã„ãªã®ãŒæ¬²ã—ã‘ã‚Œã°ã€ä»¥ä¸‹ã‚’`.zshrc`ã«æ›¸ãã€‚

```sh
function open() {
    if [ $# != 1 ]; then
        explorer.exe .
    else
        if [ -e $1 ]; then
            cmd.exe /c start $(wslpath -w $1) 2> /dev/null
        else
            echo "open: $1 : No such file or directory" 
        fi
    fi
}
```

zshã§ã—ã‹è©¦ã—ã¦ã„ãªã„ãŒã€ãŸã¶ã‚“bashã§ã‚‚ä¼¼ãŸã‚ˆã†ãªæ„Ÿã˜ã§ã„ã‘ã‚‹ã¨æ€ã†ã€‚

## ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ã«ã‚ˆã‚‹open

Macã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã¯ã€`open filename`ã¨ã™ã‚‹ã¨ã€ãã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–¢é€£ä»˜ã‘ã‚‰ã‚ŒãŸã‚¢ãƒ—ãƒªã§é–‹ãã“ã¨ãŒã§ãã‚‹ã€‚ã¾ãŸã€`open .`ãªã©ã¨ã™ã‚‹ã¨Finderã§ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒé–‹ã„ã¦ä¾¿åˆ©ã ã€‚

Windowsã®WSLã§ä¼¼ãŸã‚ˆã†ãªã“ã¨ãŒã—ãŸãã¦ã€

```sh
alias open=explorer.exe
```

ã¨ã—ã¦ã„ãŸã€‚ã“ã‚Œã§ã‚‚ã»ã¨ã‚“ã©ã®å ´åˆã¯ã†ã¾ãã„ãã®ã ãŒã€äºŒã¤å•é¡ŒãŒã‚ã£ãŸã€‚

ä¸€ã¤ã¯ã€ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã«åŒåã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹ã¨ãã¡ã‚‰ã‚’é–‹ã„ã¦ã—ã¾ã†ã“ã¨ã€‚ãŠãã‚‰ãã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ãƒ¼ã®ãƒ‘ã‚¹ã®æ¤œç´¢é †ã®å•é¡Œã ã¨æ€ã‚ã‚Œã‚‹ã€‚

ã‚‚ã†ä¸€ã¤ã¯ã€ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥å¤–ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã‘ãªã„äº‹ã€‚ä¾‹ãˆã°ã€ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«`hoge.pdf`ãŒã‚ã‚‹ãªã‚‰

```sh
open hoge.pdf
```

ã¯ã§ãã‚‹ãŒã€

```sh
open dir/hoge.pdf
open ../hoge.pdf
```

ãªã©ã¯ã§ããªã„ã€‚

## cmd.exeã«ã‚ˆã‚‹open

ã¨ã„ã†ã“ã¨ã‚’æ„šç—´ã£ãŸã‚‰ã€ã€Œ[cmd.exeã‚’ä½¿ã†ã®ã¯ã©ã†ã‹ï¼Ÿ](https://www.iplab.cs.tsukuba.ac.jp/~takakura/blog/20200715/)ã€ã¨ã„ã†æ–¹æ³•ã‚’[æ•™ãˆã¦ã„ãŸã ã„ãŸ](https://twitter.com/djed736/status/1501355520749293571)ã€‚

```sh
cmd.exec /c start filename
```

ã¨ã—ã¦å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã“ã¨ãŒã§ãã‚‹ã€‚ãŸã ã—ã€wslpathã‚’ä½¿ã£ã¦ã€WSLã®ãƒ‘ã‚¹ã‚’Windowså´ã«å¤‰æ›ã—ã¦ã‚„ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ãã“ã§ã€ã‚·ã‚§ãƒ«ã®é–¢æ•°ã«ã—ã¦

```sh
function open() { cmd.exe /c start $(wslpath -w $1) }
```

ã¨ã™ã‚Œã°ã€ã»ã¼æ‰€æœ›ã®å‹•ä½œã«ãªã‚‹ã€‚

ã—ã‹ã—ã€ã“ã‚Œã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã¨ã€ã„ã¡ã„ã¡

```sh
$ open test.pdf
'\\wsl.localhost\Ubuntu\home\username\path\to\file'
ä¸Šè¨˜ã®ç¾åœ¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ CMD.EXE ã‚’é–‹å§‹ã—ã¾ã—ãŸã€‚
UNC ãƒ‘ã‚¹ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¾ã›ã‚“ã€‚Windows ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æ—¢å®šã§ä½¿ç”¨ã—ã¾ã™ã€‚
```

ã¨è¨€ã‚ã‚Œã¦ã—ã¾ã†ã€‚ã¾ãŸã€å­˜åœ¨ã—ãªã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã—ãŸå ´åˆã€ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒé–‹ã„ã¦ã—ã¾ã†ã€‚ã•ã‚‰ã«ã€å¼•æ•°ã‚’æŒ‡å®šã—ãªã„ã§å®Ÿè¡Œã—ãŸå ´åˆã€Œã“ã®usageãƒªãƒ³ã‚¯ã‚’é–‹ãã«ã¯æ–°ã—ã„ã‚¢ãƒ—ãƒªãŒå¿…è¦ã§ã™ã€ã¿ãŸã„ãªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒå‡ºã¦ã—ã¾ã†ã€‚

ã“ã‚Œã‚’ã‚‚ã†å°‘ã—ãªã‚“ã¨ã‹ã—ã¾ã—ã‚‡ã†ã€ã¨ã„ã†ã®ãŒæœ¬ç¨¿ã®ç›®çš„ã§ã‚ã‚‹ã€‚

## cmd.exeã«ã‚ˆã‚‹open(æ”¹)

ã¾ãšå¼•æ•°ã®æ•°ãƒã‚§ãƒƒã‚¯ã‚’ã—ã‚ˆã†ã€‚å¼•æ•°ãªã—ã®å ´åˆã€Macã®openã®ã‚ˆã†ã«usageã‚’è¡¨ç¤ºã—ã¦ã‚‚ã‚ˆã„ãŒã€`open .`ã¨åŒã˜ã«ã—ã¦ã—ã¾ã£ãŸæ–¹ãŒä¾¿åˆ©ã ã‚ã†ã€‚ãã‚Œãªã‚‰ã‚¨ã‚¯ã‚¹ãƒ—ãƒ­ãƒ¼ãƒ©ã§è‰¯ã„ã€‚

```sh
function open() {
    if [ $# != 1 ]; then
        explorer.exe .
    fi
}
```

æ¬¡ã«ã€å¼•æ•°ãŒæŒ‡å®šã•ã‚ŒãŸå ´åˆã€ãã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ç¢ºèªã‚’ã—ã‚ˆã†ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Œã°ãã®ã¾ã¾é–‹ãã€ãã†ã§ãªã‘ã‚Œã°ã‚¨ãƒ©ãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹ã€‚ã“ã®æ™‚ã€`cmd.exe`ã®å‡ºåŠ›ã‚’`2> /dev/null`ã«æµã—ã¦ã—ã¾ãŠã†ã€‚

```sh
if [ -e $1 ]; then
    cmd.exe /c start $(wslpath -w $1) 2> /dev/null
else
    echo "open: $1 : No such file or directory" 
fi
```

ä»¥ä¸Šã‚’ã¾ã¨ã‚ã‚‹ã¨å†’é ­ã®ã‚³ãƒãƒ³ãƒ‰ã«ãªã‚‹ã€‚

## å‚è€ƒURL

* [WSLã§ã‚‚openã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹](https://www.iplab.cs.tsukuba.ac.jp/~takakura/blog/20200715/)
